<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>NFL Projections</title>
    <link rel="stylesheet" href="style.css">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="jquery.tablesorter.min.js"></script>
    <script src="solver.js"></script>
    <script src="require.js"></script>
    
</head>
<body>
    <div id="wrapper">
        <div id="header">
            <h1>NFL Data</h1>
        </div>
        <div id="tabs">          
            <button id="contestInfo" class="tabButton">Contest Info</button>
            <button id="defensesInfo" class="tabButton">Defense Info</button>
            <button id="teamInfo" class="tabButton">Team Info</button>
            <button id="builderInfo" class="tabButton">Builder</button>
            <button id="setPlayerMediansInfo" class="tabButton">Set Player Medians</button>
            <button id="setTeamMediansInfo" class="tabButton">Set Team Medians</button>
            <button id="injuriesInfo" class="tabButton">Injury Info</button>
        </div>
        <div id="contest" class="contestDiv tabContent" style="display:block;width:100%">
            <div id="mainTableSection" class="splitScreen">
                <div id="tableController">
                    <table>
                        <td><button id="getPlayerData" onclick="getContestData()">Scrape Data</button></td>
                        <td><button id="updatePlayerData" onclick="updateContestData()">Update from Storage</button></td>
                        <!-- Deprecating and instead running functions on load due to increased data load  exceeding localStorage quota -->
                        <!-- <td><button id="saveTableData" onclick="saveTableData()">Save Table Data</button></td> -->
                        <td><button id="loadTableData" onclick="loadTableData()">Load Table Data</button></td>
                        <td><select id="select" onchange="getPositionProjections()"><option value="All slates">All slates</option></select></td>
                        <td><select id="positionSelect" onchange="getPositionProjections()">
                            <option value="All positions">All positions</option>
                            <option value="QB">QB</option>
                            <option value="RB">RB</option>
                            <option value="WR">WR</option>
                            <option value="TE">TE</option>
                            <option value="DST">DST</option>
                        </select></td>
                        <td><select id="teamSelect" onchange="getPositionProjections()"><option value="All teams">All teams</option></option></select></td>
                    </table>
                </div>
                <div id="table">
                    <table id="contestDataTable" class="tablesorter">
                        <thead>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Team</th>
                            <th>Opponent</th>
                            <th>Salary</th>
                            <th>ID</th>
                            <th>PPG</th>
                            <th>Slate Time</th>
                            <th>Projection</th>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="playerAboutSection" style="text-align:center" class="splitScreen">
                <h2>Player Data</h2>
                <div id="playerInfo">
                    <table style="width:100%" id="playerSummary">
                        <tr>
                            <td>Name:</td>
                            <td id="playerName"></td>
                        </tr>
                        <tr>
                            <td>Position:</td>
                            <td id="playerPosition"></td>
                        </tr>
                        <tr>
                            <td>Team:</td>
                            <td id="playerTeam"></td>
                        </tr>
                        <tr>
                            <td>Opponent:</td>
                            <td id="playerOpponent"></td>
                        </tr>
                        <tr>
                            <td>Salary:</td>
                            <td id="playerSalary"></td>
                        </tr>
                        <tr>
                            <td>ID:</td>
                            <td id="playerID"></td>
                        </tr>
                        <tr>
                            <td>PPG:</td>
                            <td id="playerPPG"></td>
                        </tr>
                        <tr>
                            <td>Slate Time:</td>
                            <td id="playerSlateTime"></td>
                        </tr>
                        <tr>
                            <td>Projection:</td>
                            <td id="playerProjection"></td>
                        </tr>
                    </table>
                    <div>
                        <table id="updateProjections" style="width:100%">
                            <tr>
                                <td>Passing Yards:</td>
                                <td><input type="number" id="passingYards" value="0"></td>
                            </tr>
                            <tr>
                                <td>Passing TDs:</td>
                                <td><input type="number" id="passingTDs" value="0"></td>
                            </tr>
                            <tr>
                                <td>Interceptions:</td>
                                <td><input type="number" id="interceptions" value="0"></td>
                            </tr>
                            <tr>
                                <td>Receptions:</td>
                                <td><input type="number" id="receptions" value="0"></td>
                            </tr>
                            <tr>
                                <td>Receiving Yards:</td>
                                <td><input type="number" id="receivingYards" value="0"></td>
                            </tr>
                            <tr>
                                <td>Receiving TDs:</td>
                                <td><input type="number" id="receivingTDs" value="0"></td>
                            </tr>
                            <tr>
                                <td>Rushing Yards:</td>
                                <td><input type="number" id="rushingYards" value="0"></td>
                            </tr>
                            <tr>
                                <td>Rushing TDs:</td>
                                <td><input type="number" id="rushingTDs" value="0"></td>
                            </tr>
                            <tr>
                                <td><button id="newProjection" onclick="newProjection()">Replace Projection</button></td>
                                <td>New projection = <text id="calcProj">0</text></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div id="defenses" class="tabContent" style="display:none">
            <div class="sectionHeader">
                <h4>Defense Data<br>Stats are normalized against mean and standard deviations of projections across league</h4>
            </div>
            <button onclick="getDefenseProjections()">Scrape Defense Data</button>
            
            <table id="defensesTable" class="tablesorter">
                <thead>
                    <th>Team</th>
                    <th>Sacks</th>
                    <th>Interceptions</th>
                    <th>Fumbles Recovered</th>
                    <th>Defensive TDs</th>
                    <th>Points Allowed</th>
                    <th>Yards Allowed</th>
                </thead>
                <tbody>
                    
                </tbody>
            </table>   
        </div>
        <div id="team" class="tabContent" style="display:none">
        <!-- Create a table summarizing sum of projections for all positions except DST in contestDataTable -->
            <div class="sectionHeader">
                <h4>Team Data</h4>
            </div>    
        
            <button onclick="populateTeamInfo()">Update Team Data</button>            
            <table id="teamTable" class="tablesorter">
                <tr>
                    <th>Team</th>
                    <th>QB</th>
                    <th>RB1</th>
                    <th>RB2</th>
                    <th>WR1</th>
                    <th>WR2</th>
                    <th>WR3</th>
                    <th>TE</th>
                    <th>DST</th>
                    <th>Sum of Projections</th>
                    <th>Sum of Salary</th>
                    <th>Value</th>
                </tr>
                <tbody>
                    
                </tbody>
            </table>
        </div>
        <div id="builder" class="tabContent" style="display:none">
            <div class="sectionHeader">
                Pick a slate to optimize: <select id="select2" onchange="updateOtherSelect()"><option value="All slates">All slates</option></select>
                Slate type: <button class="builderButton" onclick="pickBuilder('Classic', event)" style="background-color: blue;">Classic</button><button class="builderButton" onclick="pickBuilder('Showdown', event)">Showdown</button>
                <label style="float:none" for="slider">Variance: <text id="varianceValue">5</text></label><input type="range" id="varianceSlider" value="5" min="0" max="10" step="1" onchange="updateSlider()">
            </div>
            <div id="builderControl" class="sectionHeader">
                Lineups to build: <input type="number" id="lineupsToBuild" value="1" min="1" max="150">
                <button class="buildLineups" onclick="buildLineups()">Build Lineup</button><button class="buildLineups" onclick="buildShowdownLineups()" style="display:none">Build Lineup</button>
                <!-- Have user upload .csv of contest info they want to build for -->
                <div class="csvSection">
                    <label style="float:none" for="contestcsv">Import salaries: </label><input type="file" name="contestcsv" id="contestcsv" oninput="handlecsv()">
                    <button onclick="downloadLineupsShowdown()" style="display:none" class="downloadLineupsButton">Download Lineups for Initial Upload</button><button onclick="downloadLineups()" class="downloadLineupsButton">Download Lineups for Initial Upload</button>
                </div>
                <div class="csvSection">
                    <label style="float:none" for="editcsv">Lineups for edit: </label><input type="file" name="editcsv" id="editcsv" oninput="handleLineupscsv()">
                    <button onclick="downloadEditedLineupsShowdown()" style="display:none" class="downloadLineupsButton">Download Edited Lineups</button><button onclick="downloadEditedLineups()" class="downloadLineupsButton">Download Edited Lineups</button>
                </div>
            </div>
            <div id="Classic" class="builderSection">
                <table id="lineupTable">
                    <thead>
                        <th>QB</th>
                        <th>RB1</th>
                        <th>RB2</th>
                        <th>WR1</th>
                        <th>WR2</th>
                        <th>WR3</th>
                        <th>TE</th>
                        <th>FLEX</th>
                        <th>DST</th>
                        <th>Salary</th>
                        <th>Projection</th>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
            <div id="Showdown" style="display:none" class="builderSection">
                <table id="showdownLineupTable">
                    <thead>
                        <th>Captain</th>
                        <th>Flex1</th>
                        <th>Flex2</th>
                        <th>Flex3</th>
                        <th>Flex4</th>
                        <th>Flex5</th>
                        <th>Salary</th>
                        <th>Projection</th>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
        </div>
        <div id="setPlayerMedians" class="tabContent" style="display:none">
            <div class="sectionHeader">
                <h4>Set player medians - percent of team's total</h4>
                <select id="teamSelectMedians" onchange="filterTeamsMedians()"><option value="All teams">All teams</option></select>
            </div>
            <div>
                <table id="sumOfLabels" style="display:none">
                    <tr>
                        <th>Passing Yards</th>
                        <th>Passing TDs</th>
                        <th>Interceptions</th>
                        <th>Receptions</th>
                        <th>Receiving Yards</th>
                        <th>Receiving TDs</th>
                        <th>Rushing Yards</th>
                        <th>Rushing TDs</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </table>
            </div>
            <div class="sectionHeader">
        <!-- Let user input player medians to be used to generate default projections in contestTableData-->
            <button onclick="getPlayerMedians()">Get Player Medians</button>
            <button onclick="updatePlayerMedians()">Save</button>
            <button onclick="updateProjectionsFromMedians()">Update Projections</button>
            
                <h4>If data does not preload, upload here</h4>
                <label style="width:auto" for="playerMedians">Upload From File:</label><input type="file" name="playerMedians" id="playerMedians" oninput="handleTXT('playerMedians')">
            </div>
            <table id="playerMediansTable" class="tablesorter">
                <thead>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Team</th>
                    <th>Passing Yards</th>
                    <th>Passing TDs</th>
                    <th>Interceptions</th>
                    <th>Receptions</th>
                    <th>Receiving Yards</th>
                    <th>Receiving TDs</th>
                    <th>Rushing Yards</th>
                    <th>Rushing TDs</th>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
        <div id="setTeamMedians" class="tabContent" style="display:none">
            <div class="sectionHeader">
                <h4>Set team medians</h4>
                <button onclick="updateTeamMedians()">Save</button>
                <div style="margin-top:10px">
                    <h4>If data does not preload, upload here</h4>
                    <label style="width:auto" for="teamMedians">Upload From File:</label><input type="file" name="teamMedians" id="teamMedians" oninput="handleTXT('teamMedians')">
                </div>
            </div>
            <table id="teamMediansTable">
                <thead>
                    <th>Team</th>
                    <th>Passing Yards</th>
                    <th>Passing TDs</th>
                    <th>Interceptions</th>
                    <th>Receptions</th>
                    <th>Receiving Yards</th>
                    <th>Receiving TDs</th>
                    <th>Rushing Yards</th>
                    <th>Rushing TDs</th>
                </thead>
                <tbody>
                </tbody>    
            </table>
        </div>
        <div id="injuries" class="tabContent" style="display:none">
            <div class="sectionHeader">
                <h4>Injury Data</h4>
            </div>
            <button onclick="addInjured()">Add row</button>
            <button onclick="reloadPage()">Save</button>
            <button onclick="clearInjuries()">Clear</button>
            <table id="injuryTable" class="tablesorter">
                <thead>
                    <th>Injured</th>
                    <th>Beneficiary 1 | Percent</th>
                    <th>Beneficiary 2 | Percent</th>
                    <th>Beneficiary 3 | Percent</th>
                    <th>Beneficiary 4 | Percent</th>
                    <th>Beneficiary 5 | Percent</th>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript" src="nflscript.js"></script>
</body>
</html>
